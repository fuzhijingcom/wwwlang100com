/*globals window,document,jQuery,setTimeout*/
/*
*
* Wijmo Library 2.3.2
* http://wijmo.com/
*
* Copyright(c) GrapeCity, Inc.  All rights reserved.
* 
* Dual licensed under the MIT or GPL Version 2 licenses.
* licensing@wijmo.com
* http://www.wijmo.com/license
*
* * Wijmo Dialog widget.
*
* Depends:
*	jquery.ui.core.js
*	jquery.ui.widget.js
*	jquery.ui.dialog.js
*	jquery.wijmo.wijutil.js
*
*/

(function(a){var c="ui-state-hover",b="wijmo-wijdialog-defaultdockingzone";a.widget("wijmo.wijdialog",a.ui.dialog,{options:{captionButtons:{},collapsingAnimation:null,expandingAnimation:null,contentUrl:"",minimizeZoneElementId:"",buttonCreating:null,stateChanged:null,blur:null},_create:function(){var d=this,e=d.options;a.ui.dialog.prototype._create.apply(d,arguments);d.uiDialog.addClass("wijmo-wijdialog");d._initWijWindow();d._bindWindowResize();d._attachDraggableResizableEvent();d.originalPosition=d.options.position;d.isPin=false},_init:function(){var d=this,e=d.options;a.ui.dialog.prototype._init.apply(d,arguments);if(e.disabled){d.disable()}},_handleDisabledOption:function(e,f){var d=this;if(e){if(!d.disabledDiv){d.disabledDiv=d._createDisabledDiv()}d.disabledDiv.appendTo("body")}else{if(d.disabledDiv){d.disabledDiv.remove();d.disabledDiv=null}}},_createDisabledDiv:function(){var e=this,h=e.uiDialog,g=h.offset(),f=h.outerWidth(),d=h.outerHeight();return a("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:f,height:d,left:g.left,top:g.top})},destroy:function(){var d=this;if(d.disabledDiv){d.disabledDiv.remove();d.disabledDiv=null}a.Widget.prototype.destroy.apply(d,arguments)},_attachDraggableResizableEvent:function(){var e=this,d=e.uiDialog,f=e.options;if(f.draggable&&d.draggable){d.bind("dragstop",function(g,h){e._saveNormalState();e._destoryIframeMask()}).bind("dragstart",function(g,h){e._createIframeMask()})}if(f.resizable&&d.resizable){d.bind("resizestop",function(g,h){e._saveNormalState();e._destoryIframeMask()}).bind("resizestart",function(g,h){e._createIframeMask()})}},_createIframeMask:function(){var d=this;if(d.innerFrame){d.mask=a("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(a.ui.dialog.maxZ+1)+"'></div>").appendTo(d.uiDialog)}},_destoryIframeMask:function(){var d=this;if(d.innerFrame&&d.mask){d.mask.remove();d.mask=undefined}},_initWijWindow:function(){var d=this,e=true;d._createCaptionButtons();d._checkUrl();d.uiDialogButtonPane=a(".ui-dialog-buttonpane",d.uiDialog);d.uiDialog.bind("mousedown",function(g){var f=g.target;if(!a.contains(d.element[0],f)){}}).bind("mouseenter",function(f){e=true}).bind("mouseleave",function(f){e=false}).bind("focusout",function(h){var g=h.target,f=a(this);if(!e){d._trigger("blur",h,{el:d.element})}})},_checkUrl:function(){var d=this,g=d.options,e=g.contentUrl,f=a('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');if(typeof e==="string"&&e.length>0){d.element.addClass("wijmo-wijdialog-hasframe");f.attr("src",e);d.element.append(f);d.innerFrame=f}d.contentWrapper=d.element},_setOption:function(e,f){var d=this;a.ui.dialog.prototype._setOption.apply(d,arguments);if(e==="captionButtons"){}else{if(e==="disabled"){d._handleDisabledOption(f,d.element)}else{if(e==="contentUrl"){if(d.innerFrame){d.innerFrame.attr("src",f)}else{d._checkUrl()}}}}},_createCaptionButtons:function(){var h=[],d=this,k=d.options,e,g={pin:{visible:true,click:d.pin,iconClassOn:"ui-icon-pin-w",iconClassOff:"ui-icon-pin-s"},refresh:{visible:true,click:d.refresh,iconClassOn:"ui-icon-refresh"},toggle:{visible:true,click:d.toggle,iconClassOn:"ui-icon-carat-1-n",iconClassOff:"ui-icon-carat-1-s"},minimize:{visible:true,click:d.minimize,iconClassOn:"ui-icon-minus"},maximize:{visible:true,click:d.maximize,iconClassOn:"ui-icon-extlink"},close:{visible:true,click:d.close,iconClassOn:"ui-icon-close"}},f=k.captionButtons,j=d.uiDialogTitlebar;j.children(".ui-dialog-titlebar-close, .wijmo-wijdialog-captionbutton").remove();a.each(g,function(i,l){if(f&&f[i]){a.extend(l,f[i])}h.push({button:i,info:l})});d._trigger("buttonCreating",null,h);for(e=0;e<h.length;e++){d._createCaptionButton(h[e],j)}},_createCaptionButton:function(g,d,i){var l=this,f,k="wijmo-wijdialog-titlebar-"+g.button,h=d.children("."+k),e=g.info,j=a("<span></span>");if(e.visible){if(h.size()===0){j.addClass("ui-icon "+e.iconClassOn).text(g.button);f=a('<a href="#"></a>').append(j).addClass(k+" ui-corner-all wijmo-wijdialog-captionbutton").attr("role","button").hover(function(){f.addClass(c)},function(){f.removeClass(c)}).click(function(m){if(j.hasClass(e.iconClassOff)){j.removeClass(e.iconClassOff)}else{j.addClass(e.iconClassOff)}if(a.isFunction(e.click)){e.click.apply(l,arguments)}return false});if(i){return f}else{f.appendTo(d)}}l[g.button+"Button"]=f}else{h.remove()}},pin:function(){var d=this.uiDialog,e=this.isPin;this._enableDisableDragger(!e);this.isPin=!e},refresh:function(){var d=this.innerFrame;if(d!==undefined){d.attr("src",d.attr("src"))}},toggle:function(){var e=this,d=e.toggleButton.children("span");if(!e.minimized){if(e.collapsed===undefined||!e.collapsed){e.collapsed=true;if(!d.hasClass("ui-icon-carat-1-s")){d.addClass("ui-icon-carat-1-s")}e._collapseDialogContent(true)}else{e.collapsed=false;if(d.hasClass("ui-icon-carat-1-s")){d.removeClass("ui-icon-carat-1-s")}e._expandDialogContent(true)}}},_expandDialogContent:function(f){var e=this,g=e.options,d=g.expandingAnimation;e.uiDialog.height("auto");if(f&&d!==null){e.contentWrapper.show(d.animated,d.options,d.duration,function(h){e.uiDialog.css("height",e._toggleHeight);if(a.isFunction(d.callback)){d.callback(h)}e._enableDisableResizer(false)})}else{e.contentWrapper.show();e._enableDisableResizer(false);e.uiDialog.css("height",e.toggleHeight)}},_collapseDialogContent:function(f){var e=this,g=e.options,d=g.collapsingAnimation;e._enableDisableResizer(true);e._toggleHeight=e.uiDialog[0].style.height;e.uiDialog.height("auto");if(f&&d!==null){e.contentWrapper.hide(d.animated,d.options,d.duration)}else{e.contentWrapper.hide()}e._enableDisableDragger(e.isPin)},_enableDisableResizer:function(d){var e=this.uiDialog;e.resizable({disabled:d});if(d){e.removeClass("ui-state-disabled")}},_enableDisableDragger:function(d){var e=this.uiDialog;e.draggable({disabled:d});if(d){e.removeClass("ui-state-disabled")}},minimize:function(){var r=this,n=r.uiDialog,f=r.options,d=null,p=a("<div></div>"),m=a("<div></div>"),j,g,q,i,k={},h,s={},l="uiDialog",e;if(!r.minimized){i=r.uiDialog.position();k.width=r.uiDialog.width();k.height=r.uiDialog.height();e=r.getState();if(r.maximized){r.maximized=false;r.restoreButton.remove();a(window).unbind(".onWinResize")}else{if(r.collapsed){r._expandDialogContent(false)}r._saveNormalState()}r._enableDisableResizer(true);if(r.collapsed){r._collapseDialogContent(false)}p.appendTo(document.body).css({top:r.uiDialog.offset().top,left:r.uiDialog.offset().left,height:r.uiDialog.innerHeight(),width:r.uiDialog.innerWidth(),position:"absolute"});r.contentWrapper.hide();if(r.uiDialogButtonPane.length){r.uiDialogButtonPane.hide()}n.height("auto");n.width("auto");r._doButtonAction(r.minimizeButton,"hide");r._restoreButton(true,r.minimizeButton,"After");r._doButtonAction(r.pinButton,"hide");r._doButtonAction(r.refreshButton,"hide");r._doButtonAction(r.toggleButton,"hide");r._doButtonAction(r.maximizeButton,"show");if(a.browser.webkit){a(".wijmo-wijdialog-captionbutton",r.uiDialog).css("float","left")}if(r.innerFrame){l="copy";r[l]=r.uiDialog.clone();r[l].empty();r.uiDialogTitlebar.appendTo(r[l])}if(f.minimizeZoneElementId.length>0){d=a("#"+f.minimizeZoneElementId)}if(d!==null&&d.size()>0){d.append(r[l])}else{j=a("."+b);if(j.size()===0){j=a('<div class="'+b+'"></div>');a(document.body).append(j)}j.append(r[l]).css("z-index",n.css("z-index"))}r[l].css("position","static");r[l].css("float","left");if(a.browser.msie&&a.browser.version==="6.0"){g=a(document).scrollTop();q=document.documentElement.clientHeight-j.height()+g;j.css({position:"absolute",left:"0px",top:q})}m.appendTo(document.body).css({top:r[l].offset().top,left:r[l].offset().left,height:r[l].innerHeight(),width:r[l].innerWidth(),position:"absolute"});r.uiDialog.hide();if(r.innerFrame){r[l].hide()}p.effect("transfer",{to:m,className:"ui-widget-content"},100,function(){p.remove();m.remove();r[l].show();r.minimized=true;h=r.uiDialog.position();s.width=r.uiDialog.width();s.height=r.uiDialog.height();r._enableDisableDragger(true);r._trigger("resize",null,{originalPosition:i,originalSize:k,position:h,size:s});r._trigger("stateChanged",null,{originalState:e,state:"minimized"})})}},_doButtonAction:function(d,e){if(d!==undefined){d.removeClass(c);d[e]()}},maximize:function(){var f=this,e=a(window),i,h={},d,g={},j;if(!f.maximized){f._enableDisableDragger(false);i=f.uiDialog.position();h.width=f.uiDialog.width();h.height=f.uiDialog.height();if(f.minimized){f.restore()}else{if(f.collapsed){f._expandDialogContent(false)}f._saveNormalState();j="normal"}f.maximized=true;if(f.maximizeButton!==undefined){f.maximizeButton.hide();f._restoreButton(true,f.maximizeButton,"Before")}if(a.browser.webkit){a(".wijmo-wijdialog-captionbutton").css("float","")}f._onWinResize(f,e);if(f.collapsed){f._collapseDialogContent(false)}if(!f.collapsed){f._enableDisableDragger(true)}f.uiDialog.resizable({disabled:true});f.uiDialog.removeClass("ui-state-disabled");d=f.uiDialog.position();g.width=f.uiDialog.width();g.height=f.uiDialog.height();f._trigger("resize",null,{originalPosition:i,originalSize:h,position:d,size:g});if(j=="normal"){f._trigger("stateChanged",null,{originalState:"normal",state:"maximized"})}}},_bindWindowResize:function(){var e=this,d=a(window),h,g,f;d.resize(function(){if(e.maximized){e._onWinResize(e,d)}});if(a.browser.msie&&a.browser.version==="6.0"){d.bind("scroll.wijdialog resize.wijdialog",function(){if(e.minimized){g=a(document).scrollTop();f=e.uiDialog.parent();h=document.documentElement.clientHeight-f.height()+g;f.css({top:h})}})}},_saveNormalState:function(){var d=this,e=d.uiDialog,f=d.element;if(!d.maximized){d.normalWidth=e.css("width");d.normalLeft=e.css("left");d.normalTop=e.css("top");d.normalHeight=e.css("height");d.normalInnerHeight=f.css("height");d.normalInnerWidth=f.css("width");d.normalInnerMinWidth=f.css("min-width");d.normalInnerMinHeight=f.css("min-height")}},_onWinResize:function(e,d){e.uiDialog.css("top",d.scrollTop());e.uiDialog.css("left",d.scrollLeft());e.uiDialog.setOutWidth(d.width());e.uiDialog.setOutHeight(d.height());e._resizeDialog(e)},_restoreButton:function(e,g,d){var f=this,i={button:"restore",info:{visible:e,click:f.restore,iconClassOn:"ui-icon-newwin"}},h=f._createCaptionButton(i,f.uiDialogTitlebar,true);if(e){h["insert"+d](g);f.restoreButton=h}},restore:function(){var l=this,j=l.uiDialog,e,g={},f,m={},k=a("<div></div>"),i=a("<div></div>"),h="uiDialog",d;if(l.minimized){l.minimized=false;l._enableDisableDragger(false);if(l.innerFrame){h="copy";if(!l[h]){h="uiDialog"}}e=l[h].position();g.width=l[h].width();g.height=l[h].height();k.appendTo(document.body).css({top:l[h].offset().top,left:l[h].offset().left,height:l[h].innerHeight(),width:l[h].innerWidth(),position:"absolute"});j.css("position","absolute");j.css("float","");if(!l.innerFrame){j.appendTo(document.body)}else{l.uiDialogTitlebar.prependTo(j);j.show()}l._enableDisableResizer(false);if(!l.isPin){l._enableDisableDragger(false)}l._restoreToNormal();l.contentWrapper.show();if(l.uiDialogButtonPane.length){l.uiDialogButtonPane.show()}i.appendTo(document.body).css({top:l.uiDialog.offset().top,left:l.uiDialog.offset().left,height:l.uiDialog.innerHeight(),width:l.uiDialog.innerWidth(),position:"absolute"});l.uiDialog.hide();k.effect("transfer",{to:i,className:"ui-widget-content"},150,function(){l.uiDialog.show();f=l.uiDialog.position();m.width=l.uiDialog.width();m.height=l.uiDialog.height();k.remove();i.remove();if(l.copy){l.copy.remove()}l._trigger("resize",null,{originalPosition:e,originalSize:g,position:f,size:m});d=l.getState();l._trigger("stateChanged",null,{originalState:"minimized",state:d})});if(l.collapsed){l._collapseDialogContent()}l._doButtonAction(l.minimizeButton,"show");l._doButtonAction(l.restoreButton,"remove");l._doButtonAction(l.pinButton,"show");l._doButtonAction(l.refreshButton,"show");l._doButtonAction(l.toggleButton,"show");if(a.browser.webkit){a(".wijmo-wijdialog-captionbutton").css("float","")}}else{if(l.maximized){l.maximized=false;e=l.uiDialog.position();g.width=l.uiDialog.width();g.height=l.uiDialog.height();a(window).unbind(".onWinResize");if(l.collapsed){l._expandDialogContent()}l._enableDisableResizer(false);if(!l.isPin){l._enableDisableDragger(false)}l._restoreToNormal();l.contentWrapper.show();if(l.collapsed){l._collapseDialogContent()}if(l.maximizeButton!==undefined){l.maximizeButton.show();l._restoreButton(false,l.maximizeButton,"before")}f=l.uiDialog.position();m.width=l.uiDialog.width();m.height=l.uiDialog.height();l._trigger("resize",null,{originalPosition:e,originalSize:g,position:f,size:m});d=l.getState();l._trigger("stateChanged",null,{originalState:"maximized",state:d})}}},getState:function(){var d=this;return d.minimized?"minimized":(d.maximized?"maximized":"normal")},reset:function(){var d=this;d.normalWidth=d.normalLeft=d.normalTop=d.normalHeight=d.normalInnerHeight=d.normalInnerWidth=d.normalInnerMinWidth=d.normalInnerMinHeight=undefined;d._setOption("position",d.originalPosition)},open:function(){var d=this,e=d.options;if(!d.innerFrame){if(!d.minimized){a.ui.dialog.prototype.open.apply(d,arguments)}else{d.uiDialog.show()}}else{d.innerFrame.attr("src",e.contentUrl);if(!d.minimized){a.ui.dialog.prototype.open.apply(d,arguments)}else{d.uiDialogTitlebar.show()}}if(d.collapsed){d._collapseDialogContent()}if(d.disabledDiv&&e.disabled){d.disabledDiv.show()}},close:function(){var d=this,e=d.options;if(a.ui.dialog.prototype.close.apply(d,arguments)){if(d.innerFrame){d.innerFrame.attr("src","");if(d.minimized){d.uiDialogTitlebar.hide()}}if(d.disabledDiv&&e.disabled){d.disabledDiv.hide()}}},_resizeDialog:function(d){d.options.width=d.uiDialog.width();d.options.height=d.uiDialog.height();d._size()},_restoreToNormal:function(){var d=this,e=d.uiDialog,f=d.element;e.css("width",d.normalWidth);e.css("left",d.normalLeft);e.css("top",d.normalTop);e.css("height",d.normalHeight);f.css("height",d.normalInnerHeight);f.css("width",d.normalInnerWidth);f.css("min-width",d.normalInnerMinWidth);f.css("min-height",d.normalInnerMinHeight);d.options.width=d.uiDialog.width();d.options.height=d.uiDialog.height()}});a.extend(a.ui.dialog.overlay,{height:function(){var e,d;if(a.browser.msie){e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);d=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(e<d){return a(window).height()+"px"}else{return e+"px"}}else{return a(document).height()+"px"}},width:function(){var d,e;if(a.browser.msie){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(d<e){return a(window).width()+"px"}else{return d+"px"}}else{return a(document).width()+"px"}}})}(jQuery));function hcAlert(b,a){a=(a===""||a===null||a===undefined)?function(){}:a;if(jQuery("#dialogalert").length==0){jQuery("body").append('<div id="dialogalert"></div>')}jQuery("#dialogalert").wijdialog({autoOpen:false,resizable:false,title:"\u6D88\u606F\u6846",modal:true,height:"auto",width:"350",captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}},buttons:{"\u786E\u5B9A":function(){jQuery(this).wijdialog("close");jQuery("#dialogalert").parent().remove();a()}}});jQuery("#dialogalert").html(b);jQuery("#dialogalert").wijdialog("open")}function hcConfirm(c,a,b){a=(a===""||a===null||a===undefined)?function(){}:a;b=(a===""||b===null||b===undefined)?function(){}:b;if(jQuery("#dialogConfirm").length==0){jQuery("body").append('<div id="dialogConfirm" align="center"></div>')}jQuery("#dialogConfirm").wijdialog({modal:true,height:"auto",width:"450",captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}},buttons:{"\u786E\u5B9A":function(){jQuery(this).wijdialog("close");jQuery("#dialogConfirm").parent().remove();a()},"\u53D6\u6D88":function(){jQuery(this).wijdialog("close");jQuery("#dialogConfirm").parent().remove();b()}}});jQuery("#dialogConfirm").parent().find(".ui-icon-close").unbind();jQuery("#dialogConfirm").parent().find(".ui-icon-close").click(function(){b()});jQuery("#dialogConfirm").html(c);jQuery("#dialogConfirm").dialog("open")};


(function(e){"use strict";var t="ui-state-hover",n="wijmo-wijdialog-defaultdockingzone";e.widget("wijmo.wijdialog",e.ui.dialog,{options:{captionButtons:{},collapsingAnimation:null,expandingAnimation:null,contentUrl:"",minimizeZoneElementId:"",buttonCreating:null,stateChanged:null,blur:null},_create:function(){var t=this,n=t.options;window.wijmoApplyWijTouchUtilEvents&&(e=window.wijmoApplyWijTouchUtilEvents(e)),e.isArray(n.buttons)&&e.each(n.buttons,function(e,t){var n=t.click;n&&typeof n=="string"&&window[n]&&(t.click=window[n])}),t.form=t.element.closest("form[id]"),e.ui.dialog.prototype._create.apply(t,arguments),t.uiDialog.addClass("wijmo-wijdialog"),t._initWijWindow(),t._bindWindowResize(),t._attachDraggableResizableEvent(),t.originalPosition=n.position,t.isPin=!1,t.form.length&&t.uiDialog.appendTo(t.form)},_makeDraggable:function(){e.ui.dialog.prototype._makeDraggable.apply(this,arguments),this.uiDialog.draggable("option","cancel",".wijmo-wijdialog-captionbutton")},_handleDisabledOption:function(t,n){var r=this;t?(r.disabledDiv||(r.disabledDiv=r._createDisabledDiv()),r.disabledDiv.appendTo("body"),e.browser.msie&&r.uiDialog.draggable("disable")):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=null,e.browser.msie&&r.uiDialog.draggable("enable"))},_createDisabledDiv:function(){var t=this,n=t.uiDialog,r=n.offset(),i=n.outerWidth(),s=n.outerHeight();return e("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:i,height:s,left:r.left,top:r.top})},destroy:function(){var t=this;t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.ui.dialog.prototype.destroy.apply(t,arguments),t.element.unbind(".wijdialog").removeData("wijdialog")},_attachDraggableResizableEvent:function(){var e=this,t=e.uiDialog,n=e.options;n.draggable&&t.draggable&&t.bind("dragstop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("dragstart",function(t,n){e._createIframeMask()}),n.resizable&&t.resizable&&t.bind("resizestop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("resizestart",function(t,n){e._createIframeMask()})},_createIframeMask:function(){var t=this;t.innerFrame&&(t.mask=e("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(e.ui.dialog.maxZ+1)+"'></div>").appendTo(t.uiDialog))},_destoryIframeMask:function(){var e=this;e.innerFrame&&e.mask&&(e.mask.remove(),e.mask=undefined)},_initWijWindow:function(){var t=this,n=!0;t._createCaptionButtons(),t._checkUrl(),t.uiDialog.bind("mousedown",function(n){var r=n.target;e.contains(t.element[0],r)||t.uiDialog.focus()}).bind("mouseenter",function(e){n=!0}).bind("mouseleave",function(e){n=!1}).bind("focusout",function(e){n||t._trigger("blur",e,{el:t.element})})},_checkUrl:function(){var t=this,n=t.options,r=n.contentUrl,i=e('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');typeof r=="string"&&r.length>0&&(t.element.addClass("wijmo-wijdialog-hasframe"),t.element.append(i),t.innerFrame=i),t.contentWrapper=t.element},_setOption:function(t,n){var r=this;e.ui.dialog.prototype._setOption.apply(r,arguments),t==="disabled"?r._handleDisabledOption(n,r.element):t==="contentUrl"?r.innerFrame?r.innerFrame.attr("src",n):r._checkUrl():(t="captionButtons")&&r._createCaptionButtons()},_createCaptionButtons:function(){var t=[],n=this,r=n.options,i,s={pin:{visible:!0,click:n.pin,iconClassOn:"ui-icon-pin-w",iconClassOff:"ui-icon-pin-s"},refresh:{visible:!0,click:n.refresh,iconClassOn:"ui-icon-refresh"},toggle:{visible:!0,click:n.toggle,iconClassOn:"ui-icon-carat-1-n",iconClassOff:"ui-icon-carat-1-s"},minimize:{visible:!0,click:n.minimize,iconClassOn:"ui-icon-minus"},maximize:{visible:!0,click:n.maximize,iconClassOn:"ui-icon-extlink"},close:{visible:!0,click:n.close,iconClassOn:"ui-icon-close"}},o=r.captionButtons,u=n.uiDialogTitlebar;u.children(".ui-dialog-titlebar-close, .wijmo-wijdialog-captionbutton").remove(),e.each(s,function(n,r){o&&o[n]&&e.extend(r,o[n]),t.push({button:n,info:r})}),n._trigger("buttonCreating",null,t);for(i=0;i<t.length;i++)n._createCaptionButton(t[i],u)},_createCaptionButton:function(n,r,i){var s=this,o,u="wijmo-wijdialog-titlebar-"+n.button,a=r.children("."+u),f=n.info,l=e("<span></span>");if(f.visible){if(a.size()===0){l.addClass("ui-icon "+f.iconClassOn).text(f.text||n.button),o=e('<a href="#"></a>').append(l).addClass(u+" ui-corner-all wijmo-wijdialog-captionbutton").attr("role","button").hover(function(){o.addClass(t)},function(){o.removeClass(t)}).click(function(t){return l.hasClass(f.iconClassOff)?l.removeClass(f.iconClassOff):l.addClass(f.iconClassOff),e.isFunction(f.click)&&f.click.apply(s,arguments),!1});if(i)return o;o.appendTo(r)}s[n.button+"Button"]=o}else a.remove()},pin:function(){var e=this.isPin,t=this.pinButton.children("span");e?t.removeClass("ui-icon-pin-s"):t.length&&(t.hasClass("ui-icon-pin-s")||t.addClass("ui-icon-pin-s")),this._enableDisableDragger(!e),this.isPin=!e},refresh:function(){var e=this.innerFrame;e!==undefined&&e.attr("src",e.attr("src"))},toggle:function(){var e=this,t=e.toggleButton.children("span");e.minimized||(e.collapsed===undefined||!e.collapsed?(e.collapsed=!0,t.hasClass("ui-icon-carat-1-s")||t.addClass("ui-icon-carat-1-s"),e._collapseDialogContent(!0)):(e.collapsed=!1,t.hasClass("ui-icon-carat-1-s")&&t.removeClass("ui-icon-carat-1-s"),e._expandDialogContent(!0)))},_expandDialogContent:function(t){var n=this,r=n.options,i=r.expandingAnimation;n.uiDialog.height("auto"),t&&i!==null?n.contentWrapper.show(i.animated,i.options,i.duration,function(t){n.uiDialog.css("height",n._toggleHeight),e.isFunction(i.callback)&&i.callback(t),r.resizable&&n._enableDisableResizer(!1)}):(n.contentWrapper.show(),r.resizable&&n._enableDisableResizer(!1),n.uiDialog.css("height",n.toggleHeight))},_collapseDialogContent:function(e){var t=this,n=t.options,r=n.collapsingAnimation;n.resizable&&t._enableDisableResizer(!0),t._toggleHeight=t.uiDialog[0].style.height,t.uiDialog.height("auto"),e&&r!==null?t.contentWrapper.hide(r.animated,r.options,r.duration):t.contentWrapper.hide(),t._enableDisableDragger(t.isPin)},_enableDisableResizer:function(e){var t=this.uiDialog;t.resizable({disabled:e}),e&&t.removeClass("ui-state-disabled")},_enableDisableDragger:function(e){var t=this.uiDialog;if(!this.options.draggable)return;t.draggable({disabled:e}),e&&t.removeClass("ui-state-disabled")},minimize:function(){var t=this,r=t.uiDialog,i=t.options,s=null,o=e("<div></div>"),u=e("<div></div>"),a,f,l,c,h={},p,d={},v="uiDialog",m;t.minimized||(c=t.uiDialog.position(),h.width=t.uiDialog.width(),h.height=t.uiDialog.height(),m=t.getState(),t.maximized?(t.maximized=!1,t.restoreButton.remove(),e(window).unbind(".onWinResize")):(t.collapsed&&t._expandDialogContent(!1),t._saveNormalState()),t._enableDisableResizer(!0),t.collapsed&&t._collapseDialogContent(!1),o.appendTo(document.body).css({top:t.uiDialog.offset().top,left:t.uiDialog.offset().left,height:t.uiDialog.innerHeight(),width:t.uiDialog.innerWidth(),position:"absolute"}),t.contentWrapper.hide(),t.uiDialogButtonPane.length&&t.uiDialogButtonPane.hide(),r.height("auto"),r.width("auto"),t._doButtonAction(t.minimizeButton,"hide"),t._restoreButton(!0,t.minimizeButton,"After"),t._doButtonAction(t.pinButton,"hide"),t._doButtonAction(t.refreshButton,"hide"),t._doButtonAction(t.toggleButton,"hide"),t._doButtonAction(t.maximizeButton,"show"),e.browser.webkit&&e(".wijmo-wijdialog-captionbutton",t.uiDialog).css("float","left"),t.innerFrame&&(v="copy",t[v]=t.uiDialog.clone(),t[v].empty(),t.uiDialogTitlebar.appendTo(t[v])),i.minimizeZoneElementId.length>0&&(s=e("#"+i.minimizeZoneElementId)),s!==null&&s.size()>0?s.append(t[v]):(a=e("."+n),a.size()===0&&(a=e('<div class="'+n+'"></div>'),e(document.body).append(a)),a.append(t[v]).css("z-index",r.css("z-index"))),t[v].css("position","static"),t[v].css("float","left"),e.browser.msie&&e.browser.version==="6.0"&&(f=e(document).scrollTop(),l=document.documentElement.clientHeight-a.height()+f,a.css({position:"absolute",left:"0px",top:l})),u.appendTo(document.body).css({top:t[v].offset().top,left:t[v].offset().left,height:t[v].innerHeight(),width:t[v].innerWidth(),position:"absolute"}),t.uiDialog.hide(),t.innerFrame&&t[v].hide(),o.effect("transfer",{to:u,className:"ui-widget-content"},100,function(){o.remove(),u.remove(),t[v].show(),t.minimized=!0,p=t.uiDialog.position(),d.width=t.uiDialog.width(),d.height=t.uiDialog.height(),t._enableDisableDragger(!0),t._trigger("resize",null,{originalPosition:c,originalSize:h,position:p,size:d}),t._trigger("stateChanged",null,{originalState:m,state:"minimized"})}))},_doButtonAction:function(e,n){e!==undefined&&(e.removeClass(t),e[n]())},maximize:function(){var t=this,n=e(window),r,i={},s,o={},u;t.maximized||(t._enableDisableDragger(!1),r=t.uiDialog.position(),i.width=t.uiDialog.width(),i.height=t.uiDialog.height(),t.minimized?t.restore():(t.collapsed&&t._expandDialogContent(!1),t._saveNormalState(),u="normal"),t.maximized=!0,t.maximizeButton!==undefined&&(t.maximizeButton.hide(),t._restoreButton(!0,t.maximizeButton,"Before")),e.browser.webkit&&e(".wijmo-wijdialog-captionbutton").css("float",""),t._onWinResize(t,n),t.collapsed&&t._collapseDialogContent(!1),t.collapsed||t._enableDisableDragger(!0),t.uiDialog.resizable({disabled:!0}),t.uiDialog.removeClass("ui-state-disabled"),s=t.uiDialog.position(),o.width=t.uiDialog.width(),o.height=t.uiDialog.height(),t._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),u==="normal"&&t._trigger("stateChanged",null,{originalState:"normal",state:"maximized"}))},_bindWindowResize:function(){var t=this,n=e(window),r,i,s;n.resize(function(){t.maximized&&t._onWinResize(t,n)}),e.browser.msie&&e.browser.version==="6.0"&&n.bind("scroll.wijdialog resize.wijdialog",function(){t.minimized&&(i=e(document).scrollTop(),s=t.uiDialog.parent(),r=document.documentElement.clientHeight-s.height()+i,s.css({top:r}))})},_saveNormalState:function(){var e=this,t=e.uiDialog,n=e.element;e.maximized||(e.normalWidth=t.css("width"),e.normalLeft=t.css("left"),e.normalTop=t.css("top"),e.normalHeight=t.css("height"),e.normalInnerHeight=n.css("height"),e.normalInnerWidth=n.css("width"),e.normalInnerMinWidth=n.css("min-width"),e.normalInnerMinHeight=n.css("min-height"))},_onWinResize:function(e,t){e.uiDialog.css("top",t.scrollTop()),e.uiDialog.css("left",t.scrollLeft()),e.uiDialog.setOutWidth(t.width()),e.uiDialog.setOutHeight(t.height()),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height(),e._size(),e.collapsed&&(e.uiDialog.height("auto"),e.contentWrapper.hide())},_restoreButton:function(e,t,n){var r=this,i={button:"restore",info:{visible:e,click:r.restore,iconClassOn:"ui-icon-newwin"}},s=r._createCaptionButton(i,r.uiDialogTitlebar,!0);e&&(s["insert"+n](t),r.restoreButton=s)},_appendToBody:function(e){this.innerFrame?(this.uiDialogTitlebar.prependTo(e),e.show()):e.appendTo(document.body)},restore:function(){var t=this,n=t.uiDialog,r,i={},s,o={},u=e("<div></div>"),a=e("<div></div>"),f="uiDialog",l;t.minimized?(t.minimized=!1,t._enableDisableDragger(!1),t.innerFrame&&(f="copy",t[f]||(f="uiDialog")),r=t[f].position(),i.width=t[f].width(),i.height=t[f].height(),u.appendTo(document.body).css({top:t[f].offset().top,left:t[f].offset().left,height:t[f].innerHeight(),width:t[f].innerWidth(),position:"absolute"}),n.css("position","absolute"),n.css("float",""),t._appendToBody(n),t._enableDisableResizer(!1),t.isPin||t._enableDisableDragger(!1),t._restoreToNormal(),t.contentWrapper.show(),t.uiDialogButtonPane.length&&t.uiDialogButtonPane.show(),a.appendTo(document.body).css({top:t.uiDialog.offset().top,left:t.uiDialog.offset().left,height:t.uiDialog.innerHeight(),width:t.uiDialog.innerWidth(),position:"absolute"}),t.uiDialog.hide(),u.effect("transfer",{to:a,className:"ui-widget-content"},150,function(){t.uiDialog.show(),s=t.uiDialog.position(),o.width=t.uiDialog.width(),o.height=t.uiDialog.height(),u.remove(),a.remove(),t.copy&&t.copy.remove(),t._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=t.getState(),t._trigger("stateChanged",null,{originalState:"minimized",state:l})}),t.collapsed&&t._collapseDialogContent(),t._doButtonAction(t.minimizeButton,"show"),t._doButtonAction(t.restoreButton,"remove"),t._doButtonAction(t.pinButton,"show"),t._doButtonAction(t.refreshButton,"show"),t._doButtonAction(t.toggleButton,"show"),e.browser.webkit&&e(".wijmo-wijdialog-captionbutton").css("float","")):t.maximized&&(t.maximized=!1,r=t.uiDialog.position(),i.width=t.uiDialog.width(),i.height=t.uiDialog.height(),e(window).unbind(".onWinResize"),t.collapsed&&t._expandDialogContent(),t._enableDisableResizer(!1),t.isPin||t._enableDisableDragger(!1),t._restoreToNormal(),t.contentWrapper.show(),t.collapsed&&t._collapseDialogContent(),t.maximizeButton!==undefined&&(t.maximizeButton.show(),t._restoreButton(!1,t.maximizeButton,"before")),s=t.uiDialog.position(),o.width=t.uiDialog.width(),o.height=t.uiDialog.height(),t._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=t.getState(),t._trigger("stateChanged",null,{originalState:"maximized",state:l}))},getState:function(){var e=this;return e.minimized?"minimized":e.maximized?"maximized":"normal"},reset:function(){var e=this;e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e._setOption("position",e.originalPosition)},open:function(){var t=this,n=t.options;(n.hide==="drop"||n.hide==="bounce")&&e.browser.msie&&t.uiDialog.css("filter","auto"),t.innerFrame?(t.innerFrame.attr("src",n.contentUrl),t.minimized?t.uiDialogTitlebar.show():e.ui.dialog.prototype.open.apply(t,arguments)):t.minimized?t.uiDialog.show():e.ui.dialog.prototype.open.apply(t,arguments),t.collapsed&&t._collapseDialogContent(),n.disabled&&(t.disabledDiv?t.disabledDiv.show():t.disable())},close:function(){var t=this,n=t.options;e.ui.dialog.prototype.close.apply(t,arguments)&&(t.innerFrame&&(t.innerFrame.attr("src",""),t.minimized&&t.uiDialogTitlebar.hide()),t.disabledDiv&&n.disabled&&t.disabledDiv.hide())},_restoreToNormal:function(){var e=this,t=e.uiDialog,n=e.element;t.css("width",e.normalWidth),t.css("left",e.normalLeft),t.css("top",e.normalTop),t.css("height",e.normalHeight),n.css("height",e.normalInnerHeight),n.css("width",e.normalInnerWidth),n.css("min-width",e.normalInnerMinWidth),n.css("min-height",e.normalInnerMinHeight),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height()}}),e.extend(e.ui.dialog.overlay,{create:function(t){e.ui.dialog.latestDlg=t,this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ&&!e.contains(e.ui.dialog.latestDlg.element[0],t.target))return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},height:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"}})})(jQuery)